<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: transparent;
    font-family: sans-serif;
  }

  #streamList {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }

  .stream {
    flex: 0 0 calc((100% - 20px) / 3);
    max-width: calc((100% - 20px) / 3);
    background: rgba(255,255,255,0.9);
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
  }

  .stream img {
    width: 100%;
    display: block;
  }

  .info {
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .info h2 {
    margin: 0;
    font-size: 16px;
  }

  .info p {
    margin: 0;
    font-size: 13px;
    color: #555;
  }

  .info a {
    color: #1f8ef1;
    text-decoration: none;
    font-weight: bold;
    font-size: 13px;
  }

  @media (max-width: 900px) {
    .stream {
      flex: 0 0 50%;
      max-width: 50%;
    }
  }

  @media (max-width: 600px) {
    .stream {
      flex: 0 0 100%;
      max-width: 100%;
    }
  }
</style>
</head>
<body>

<div id="streamList">読み込み中...</div>

<script>
const nameMap = {
  "ziyuumama": "自由ママ",
  "osamame": "納豆",
  "tetorapamu": "天虎ぱむ",
  "cooky": "こっきー",
  "teardzn": "てぃあー",
  "pandaharry": "熊猫はりぃ",
  "hondy": "ほんでぃー",
  "tamuu": "たむう",
  "takomosher": "TAKAMOSHER",
  "katamimiusagi": "片耳うさぎ",
  "kumanokanchou": "熊の艦長",
  "lama": "LAMA",
  "macyu": "まちゅ",
  "k1rin": "K1rin",
  "h1ro": "H1ro",
  "yugiichika": "遊技イチカ",
  "rio": "りお",
  "akasa": "あかさ",
  "kamita": "神多ヘーリウ・デュシス",
};

async function loadStreams() {
  const container = document.getElementById('streamList');
  container.innerHTML = '読み込み中...';

  try {
    const res = await fetch('https://construct-elderly-authentic-athens.trycloudflare.com/live');
    if (!res.ok) throw new Error('通信失敗');
    const data = await res.json();

    if (data.length === 0) {
      container.innerHTML = '現在配信中のチャンネルはありません';
      return;
    }

    container.innerHTML = '';
    data.forEach(stream => {
      const jpname = nameMap[stream.name] || stream.name;
      const div = document.createElement('div');
      div.className = 'stream';
      div.innerHTML = `
        <a href="${stream.url}" target="_blank" rel="noopener noreferrer">
          <img src="${stream.thumbnail}" alt="${jpname}">
        </a>
        <div class="info">
          <h2>${jpname}</h2>
          <p>${stream.title}</p>
        </div>
      `;
      container.appendChild(div);
    });

  } catch (e) {
    container.innerHTML = 'データの取得に失敗しました';
    console.error(e);
  }
}

loadStreams();
setInterval(loadStreams, 30000);
</script>

</body>
</html>

